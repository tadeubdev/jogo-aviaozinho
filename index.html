<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Air Plane game</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  </head>
  <body>
    <main>
      <div class="dialog dialog-master active" id="game-loading">
        <div class="dialog-container">
          <h1>Air Plane</h1>
          <p>Aguarde! Carregando...</p>
        </div>
      </div>
      <div class="dialog dialog-master" id="mobile-horizontal">
        <div class="dialog-container">
          <h1>Air Plane</h1>
          <p>Vire o celular para jogar!</p>
        </div>
      </div>
      <div class="dialog active" id="game-start">
        <div class="dialog-container">
          <h1>Air Plane</h1>
          <p>Clique no bot√£o para iniciar.</p>
          <button id="btn-start" class="dialog-btn">Iniciar</button>
        </div>
      </div>
      <div class="dialog" id="game-over">
        <div class="dialog-container">
          <h1>Air Plane</h1>
          <p>GAME OVER</p>
          <button id="btn-restart" class="dialog-btn">Reiniciar</button>
        </div>
      </div>
      <div id="mobile-controls">
        <button id="btn-left" class="mobile-control-btn"><i class="fas fa-chevron-left"></i></button>
        <button id="btn-up" class="mobile-control-btn"><i class="fas fa-chevron-up"></i></button>
        <button id="btn-right" class="mobile-control-btn"><i class="fas fa-chevron-right"></i></button>
        <button id="btn-down" class="mobile-control-btn"><i class="fas fa-chevron-down"></i></button>
      </div>
      <div id="fullscreen">
        <button id="btn-fullscreen"><i class="fas fa-compress"></i></button>
      </div>
      <canvas id="game-center"></canvas>
    </main>
    <script src="assets/js/clouds.js"></script>
    <script src="assets/js/floor.js"></script>
    <script src="assets/js/helicopter.js"></script>
    <script src="assets/js/score.js"></script>
    <script src="assets/js/script.js"></script>
    <script>
      window.addEventListener('load', () => {
        const imagesToLoad = ['assets/img/helicopter.png', 'assets/img/cloud.png', 'assets/img/grass.png'];
        const audiosToLoad = ['assets/audio/helicopter.mp3', 'assets/audio/level-failed.mp3'];

        const loadImages = (images, callback) => {
          let imagesToLoad = images.length;
          const onload = () => --imagesToLoad === 0 && callback();
          images.forEach(image => {
            const img = new Image();
            img.src = image;
            img.addEventListener('load', onload);
          });
        };

        const loadAudios = (audios, callback) => {
          let audiosToLoad = audios.length;
          const onload = () => --audiosToLoad === 0 && callback();
          audios.forEach(audio => {
            const audioEl = new Audio();
            audioEl.src = audio;
            audioEl.addEventListener('canplaythrough', onload);
          });
        };

        loadImages(imagesToLoad, () => {
          loadAudios(audiosToLoad, () => {
            document.getElementById('game-loading').classList.remove('active');
          });
        });
      });
    </script>
  </body>
</html>